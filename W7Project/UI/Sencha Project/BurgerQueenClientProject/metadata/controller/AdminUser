{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "AdminUser",
        "mixins": [
            "{",
            "        GlobalUtil: 'com.oocl.mnlbc.GlobalMessage'",
            "",
            "}"
        ]
    },
    "name": "HomePage1",
    "designerId": "6d21b6fc-f004-4e41-88c9-3b472692a817",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "adminUserPanel",
                "selector": "#AdminUserPanel"
            },
            "name": "adminUserPanel",
            "designerId": "4398fc06-d577-4af0-b48c-775fa5125a49"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "userGrid",
                "selector": "#userGrid"
            },
            "name": "userGrid",
            "designerId": "79a7e3e4-8a35-4ec9-8bff-9bb9a12c3b7a"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "btnEnable",
                "selector": "#btnEnable"
            },
            "name": "btnEnable",
            "designerId": "e112116a-d57f-4aaa-8927-28aeb8664350"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "btnDisable",
                "selector": "#btnDisable"
            },
            "name": "btnDisable",
            "designerId": "ec007ca3-1daf-4c0f-9676-8ff7a5a312f7"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnEnable",
                "designer|targetType": "MyButton30",
                "fn": "onBtnEnableClick",
                "implHandler": [
                    " var userStore = Ext.getStore('UsersStore');",
                    "",
                    "                         var usersGrid = this.getUserGrid(),",
                    "                    selectModel = usersGrid.getSelectionModel(),",
                    "                    selectedUser = selectModel.getSelection();",
                    "                    User = selectedUser[0].data;",
                    "",
                    "",
                    "var user ={",
                    "    'address':User.Address,",
                    "    'contactno':User.Contact,",
                    "    'email':User.Email,",
                    "    'firstname':User.Firstname,",
                    "    'gender':User.Gender,",
                    "    'id':User.id,",
                    "    'isDisabled':0,",
                    "    'lastname':User.Lastname,",
                    "    'middlename':User.Middlename,",
                    "    'points':User.Points,",
                    "    'type':User.Type,",
                    "    'userLevel':User.Level,",
                    "    'username':User.Username",
                    "};",
                    "",
                    "       Ext.Ajax.request({",
                    "                    url:'user/updateUser',",
                    "                    headers: { 'Content-Type': 'application/json',",
                    "                     'Accept': 'application/json'},",
                    "                     jsonData:user,",
                    "                    scope:this,",
                    "                    success : function(response) {",
                    "                        Ext.MessageBox.alert('Success',User.Username + ' is now Activated');",
                    "",
                    "                        userStore.removeAll();",
                    "",
                    "                         Ext.Ajax.request({",
                    "                            url : 'user/getAllUsers',",
                    "                            params : {",
                    "",
                    "                            },",
                    "                            scope : this,",
                    "                            success : function(response) {",
                    "                                var data = Ext.decode(response.responseText);",
                    "                                Ext.each(data, function(record){",
                    "                                    var users = {",
                    "                                        id:record.id,",
                    "                                        Username:record.username,",
                    "                                        Password:record.password,",
                    "                                        Firstname:record.firstname,",
                    "                                        Middlename:record.middlename,",
                    "                                        Lastname:record.lastname,",
                    "                                        Gender:record.gender,",
                    "                                        Email:record.email,",
                    "                                        Address:record.address,",
                    "                                        Contact:record.contactno,",
                    "                                        Disabled:record.isDisabled,",
                    "                                        Type:record.type,",
                    "                                        Level:record.userLevel,",
                    "                                        Points:record.points",
                    "",
                    "                                    };",
                    "                                    userStore.add(users);",
                    "                                });",
                    "                            }",
                    "                        });",
                    "",
                    "                    }",
                    "                });",
                    "",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnEnableClick",
            "designerId": "2fc1f8f3-0c5c-4482-b01d-7d2308016a62"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnDisable",
                "designer|targetType": "MyButton31",
                "fn": "onBtnDisableClick",
                "implHandler": [
                    "",
                    "        var userStore = Ext.getStore('UsersStore');",
                    "",
                    "                         var usersGrid = this.getUserGrid(),",
                    "                    selectModel = usersGrid.getSelectionModel(),",
                    "                    selectedUser = selectModel.getSelection();",
                    "                    User = selectedUser[0].data;",
                    "var user ={",
                    "    'address':User.Address,",
                    "    'contactno':User.Contact,",
                    "    'email':User.Email,",
                    "    'firstname':User.Firstname,",
                    "    'gender':User.Gender,",
                    "    'id':User.id,",
                    "    'isDisabled':1,",
                    "    'lastname':User.Lastname,",
                    "    'middlename':User.Middlename,",
                    "    'points':User.Points,",
                    "    'type':User.Type,",
                    "    'userLevel':User.Level,",
                    "    'username':User.Username",
                    "};",
                    "       Ext.Ajax.request({",
                    "                    url:'user/updateUser',",
                    "                    headers: { 'Content-Type': 'application/json',",
                    "                     'Accept': 'application/json'},",
                    "                     jsonData:user,",
                    "                    scope:this,",
                    "                    success : function(response) {",
                    "                        Ext.MessageBox.alert('Success',User.Username + ' is now Blocked');",
                    "                        var userStore = Ext.getStore('UsersStore');",
                    "                        userStore.removeAll();",
                    "                                                ",
                    "            Ext.Ajax.request({",
                    "                        url : 'user/getAllUsers',",
                    "                        params : {",
                    "",
                    "                        },",
                    "                        scope : this,",
                    "                        success : function(response) {",
                    "                            var data = Ext.decode(response.responseText);",
                    "                            Ext.each(data, function(record){",
                    "                                var users = {",
                    "                                    id:record.id,",
                    "                                    Username:record.username,",
                    "                                    Password:record.password,",
                    "                                    Firstname:record.firstname,",
                    "                                    Middlename:record.middlename,",
                    "                                    Lastname:record.lastname,",
                    "                                    Gender:record.gender,",
                    "                                    Email:record.email,",
                    "                                    Address:record.address,",
                    "                                    Contact:record.contactno,",
                    "                                    Disabled:record.isDisabled,",
                    "                                    Type:record.type,",
                    "                                    Level:record.userLevel,",
                    "                                    Points:record.points",
                    "",
                    "                                };",
                    "                                userStore.add(users);",
                    "                            });",
                    "                        }",
                    "                    });",
                    "",
                    "                    }",
                    "                });",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnDisableClick",
            "designerId": "1cddfb45-55fe-472a-bb6a-d3cb4a3bf187"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#userGrid",
                "designer|targetType": "MyGridPanel5",
                "fn": "onUserGridSelectionChange",
                "implHandler": [
                    "var userStore = Ext.getStore('UsersStore');",
                    "",
                    "        var usersGrid = this.getUserGrid(),",
                    "            selectModel = usersGrid.getSelectionModel(),",
                    "            selectedUser = selectModel.getSelection();",
                    "",
                    "if(!Ext.isEmpty(selectedUser))  {",
                    "    userDisabledValue = selectedUser[0].data.Disabled;",
                    "    if(userDisabledValue === 0){",
                    "            this.getBtnEnable().disable();",
                    "            this.getBtnDisable().enable();",
                    "            Ext.getCmp('btnManage').enable();",
                    "        }else{",
                    "            this.getBtnEnable().enable();",
                    "            this.getBtnDisable().disable();",
                    "            Ext.getCmp('btnManage').enable();",
                    "        }",
                    "}else{",
                    "    Ext.getCmp('btnManage').disable();",
                    "}",
                    ""
                ],
                "name": "selectionchange",
                "scope": "me"
            },
            "name": "onUserGridSelectionChange",
            "designerId": "ef58eb99-5c7b-4dfd-85eb-519bf71201df"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnUsers",
                "designer|targetType": "MyButton25",
                "fn": "onBtnUsersClick",
                "implHandler": [
                    "",
                    "    this.getAdminUserPanel().show();",
                    "",
                    " var userStore = Ext.getStore('UsersStore');",
                    "",
                    "userStore.removeAll();",
                    "",
                    "Ext.Ajax.request({",
                    "            url : 'user/getAllUsers',",
                    "            params : {",
                    "",
                    "            },",
                    "            scope : this,",
                    "            success : function(response) {",
                    "                var data = Ext.decode(response.responseText);",
                    "                Ext.each(data, function(record){",
                    "                    var users = {",
                    "                        id:record.id,",
                    "                        Username:record.username,",
                    "                        Password:record.password,",
                    "                        Firstname:record.firstname,",
                    "                        Middlename:record.middlename,",
                    "                        Lastname:record.lastname,",
                    "                        Gender:record.gender,",
                    "                        Email:record.email,",
                    "                        Address:record.address,",
                    "                        Contact:record.contactno,",
                    "                        Disabled:record.isDisabled,",
                    "                        Type:record.type,",
                    "                        Level:record.userLevel,",
                    "                        Points:record.points",
                    "",
                    "                    };",
                    "                    userStore.add(users);",
                    "                });",
                    "            }",
                    "        });",
                    "",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnUsersClick",
            "designerId": "e9743a34-a7f0-48c3-a61e-b9cb23917861"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnManage",
                "designer|targetType": "MyButton36",
                "fn": "onBtnManageClick",
                "implHandler": [
                    "    Ext.create('BurgerQueen.view.WinUserEdit').show();",
                    "",
                    "                var usersGrid = this.getUserGrid(),",
                    "                    selectModel = usersGrid.getSelectionModel(),",
                    "                    selectedUser = selectModel.getSelection(),",
                    "                    type = selectedUser[0].data.Type,",
                    "                    point = selectedUser[0].data.Points;",
                    "",
                    "                Ext.getCmp('UserManageType').setValue(type);",
                    "                Ext.getCmp('manageUserPoints').setValue(point);"
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onBtnManageClick",
            "designerId": "db71fd84-938f-4c68-ab63-1f6083eae10b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#manageUserBtnConfirm",
                "designer|targetType": "MyButton35",
                "fn": "onManageUserBtnConfirmClick",
                "implHandler": [
                    "        var form = this.getAdminManageUserForm();",
                    "        var usersGrid = this.getUserGrid(),",
                    "            selectModel = usersGrid.getSelectionModel(),",
                    "            selectedUser = selectModel.getSelection();",
                    "        User = selectedUser[0].data;",
                    "",
                    " if(form.isValid()){",
                    "     var type = Ext.getCmp('UserManageType').getValue(),",
                    "          points = Ext.getCmp('manageUserPoints').getValue();",
                    "",
                    "    var user ={",
                    "                'address':User.Address,",
                    "                'contactno':User.Contact,",
                    "                'email':User.Email,",
                    "                'firstname':User.Firstname,",
                    "                'gender':User.Gender,",
                    "                'id':User.id,",
                    "                'isDisabled':User.isDisabled,",
                    "                'lastname':User.Lastname,",
                    "                'middlename':User.Middlename,",
                    "                'points':points,",
                    "                'type':type,",
                    "                'userLevel':User.Level,",
                    "                'username':User.Username",
                    "            };",
                    "",
                    "                    Ext.Ajax.request({",
                    "                            url:'user/updateUser',",
                    "                            headers: { 'Content-Type': 'application/json',",
                    "                             'Accept': 'application/json'},",
                    "                             jsonData:user,",
                    "                            scope:this,",
                    "                            success : function(response) {",
                    "                                Ext.MessageBox.alert('Success','User: '+User.Username + ' was updated!');",
                    "                                var userStore = Ext.getStore('UsersStore');",
                    "                                userStore.removeAll();",
                    "",
                    "                    Ext.Ajax.request({",
                    "                                url : 'user/getAllUsers',",
                    "                                params : {",
                    "",
                    "                                },",
                    "                                scope : this,",
                    "                                success : function(response) {",
                    "                                    var data = Ext.decode(response.responseText);",
                    "                                    Ext.each(data, function(record){",
                    "                                        var users = {",
                    "                                            id:record.id,",
                    "                                            Username:record.username,",
                    "                                            Password:record.password,",
                    "                                            Firstname:record.firstname,",
                    "                                            Middlename:record.middlename,",
                    "                                            Lastname:record.lastname,",
                    "                                            Gender:record.gender,",
                    "                                            Email:record.email,",
                    "                                            Address:record.address,",
                    "                                            Contact:record.contactno,",
                    "                                            Disabled:record.isDisabled,",
                    "                                            Type:record.type,",
                    "                                            Level:record.userLevel,",
                    "                                            Points:record.points",
                    "",
                    "                                        };",
                    "                                        userStore.add(users);",
                    "                                    });",
                    "                                }",
                    "                            });",
                    "",
                    "                            }",
                    "                        });",
                    "",
                    "    this.getWinUserEdit().destroy();",
                    "",
                    " }else{",
                    "     Ext.MessageBox.alert('Error', 'Invalid input, please check fields');",
                    " }",
                    "",
                    "",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "name": "onManageUserBtnConfirmClick",
            "designerId": "62d693bb-efc1-456b-a9cb-8a188577ca72"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "winUserEdit",
                "selector": "#winUserEdit"
            },
            "name": "winUserEdit",
            "designerId": "00dda188-19f9-4c19-925f-6a6b780d6c25"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "adminManageUserForm",
                "selector": "#adminManageUserForm"
            },
            "name": "adminManageUserForm",
            "designerId": "588c0b9c-15b5-44b3-90fc-e0c8c66b0362"
        }
    ]
}